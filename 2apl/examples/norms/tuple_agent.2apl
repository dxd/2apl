BeliefUpdates:
  { true } RemoveObj(Name,X,Y) { not object(Name,position(X,Y)) }
  { true } AddObj(tuple(Name,Pos,_)) { object(Name,Pos) }
  { position(X,Y) and health(H) } UpdateStatus(NewX,NewY,NewHealth) { not position(X,Y), position(NewX,NewY), not health(H), health(NewHealth) }
  { clock(Old) } UpdateClock(New) { not clock(Old), clock(New) }

Beliefs:   
  raise(X,NewX):- NewX is X + 1.
  lower(X,NewX):- NewX is X - 1.
  health(100).
  position(1,1).
  clock(0).
  
Plans:
  updateStatus()

Goals:
  at(3,3)
 

PG-rules:

at(X,Y) <- true | {
    moveTo(X,Y); 
    dropgoal(at(X,Y))
} : 4000

PC-rules:

///////////// Moving
moveTo(X,Y) <- position(X2,Y2) and X2 < X and raise(X2,NewX) | { 
    updatePos(NewX,Y2); moveTo(X,Y)
}
moveTo(X,Y) <- position(X2,Y2) and X2 > X and lower(X2,NewX) | { 
    updatePos(NewX,Y2); moveTo(X,Y)
}
moveTo(X,Y) <- position(X2,Y2) and Y2 < Y and raise(Y2,NewY) | { 
    updatePos(X2,NewY); moveTo(X,Y)
}
moveTo(X,Y) <- position(X2,Y2) and Y2 > Y and lower(Y2,NewY) | { 
    updatePos(X2,NewY); moveTo(X,Y)
}
moveTo(X,Y) <- position(X,Y) | { skip }

updatePos(NewX,NewY) <- position(X,Y) | {
    B(health(Health));
    UpdateStatus(NewX,NewY,Health);
    //@space(take(status(position(X,Y),Health),0),_);
    @space(write(position(NewX,NewY),-1),_)
} 

readClock() <- true |{
    @space(clock(),R);
    B(R=[actionresult(Result)]);
    UpdateClock(Result)
}

updateStatus() <- true |{
	skip
    //@space(read(status(null,null),0),R); 
    //B(R=[actionresult(tuple(Me,position(X,Y),H))]);
    //UpdateStatus(X,Y,H)
}

event(obligation(Goal,Deadline,Sanction),space) <- true | {
   adoptObligation(Goal, Deadline, Sanction)
}

event(prohibition(State,Sanction),space) <- true | {
    aprohibition(State,Sanction)
}

event(changed(status),space) <- true |{ updateStatus() }

aprohibition(at(X,Y,_), reduce_200(_)) <- true | {
    adoptprohibition(at(X,Y) -> reduce_200)
}

adoptObligation(at(X,Y,_), D, reduce_100(_)) <- true | {
    adopta(at(X,Y) : D -> reduce_100)
}

Sanctions:
	reduce_100 -> 3, reduce_200 -> 5
